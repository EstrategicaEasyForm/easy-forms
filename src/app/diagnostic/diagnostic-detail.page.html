<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button class="toolbar-button"></ion-back-button>
    </ion-buttons>
    <ion-title>PLANILLA DE DIAGNÓSTICO</ion-title>

    <ion-buttons slot="end">
      <ion-button class="toolbar-button" (click)="saveItem()" [disabled]="!validation_form.valid">
        <ion-icon color="primary" name="save"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item>
      <form class="panel-center" [formGroup]="validation_form">
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-item *ngIf="!newRegistry" style="margin: 0 auto">Registro {{indx + 1 }} de {{detailsList?.length }}
              </ion-item>
              <ion-item *ngIf="newRegistry" style="margin: 0 auto">Nuevo Registro
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="6">
              <ion-label>Receptora</ion-label>
            </ion-col>
            <ion-col size="5">
              <ion-label>Diagnóstico 1</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
			  <ion-label class="text-readonly">{{dataItem.transferData.receiver}}</ion-label>
			</ion-col>
            <ion-col>
              <ion-select #dx1 style="max-width: 100%;" placeholder="Diagnóstico 1" [(ngModel)]="dataItem.dx1" formControlName="dx1">
                <ion-select-option value="P">Preñada</ion-select-option>
                <ion-select-option value="V">Vacía</ion-select-option>
              </ion-select>
              <div class="validation-errors">
                <ng-container *ngFor="let validation of validation_messages.dx1">
                  <div class="error-message" *ngIf="validation_form.get('dx1').hasError(validation.type) 
                    && (validation_form.get('dx1').dirty || validation_form.get('dx1').touched)">
                    {{ validation.message }}
                  </div>
                </ng-container>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </form>
    </ion-item>
    <ion-item>
      <ion-grid style="text-align: center;">
        <ion-row>
          <ion-col offset="1">
            <ion-button fill="outline" class="fab-button" [disabled]="indx===0 || (action === 'update' && !validation_form.valid) " (click)="backItemButton()">
              <ion-icon name="arrow-dropleft-circle"></ion-icon>
            </ion-button>
          </ion-col>
          <ion-col offset="-1.4">
            <ion-button fill="outline" class="fab-button" [disabled]="!validation_form.valid || indx + 1 === detailsList?.length " (click)="nextItemButton()">
              <ion-icon name="arrow-dropright-circle"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-list>
</ion-content>