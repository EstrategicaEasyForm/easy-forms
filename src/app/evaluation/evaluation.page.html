<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button class="toolbar-button"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button autoHide="false" (click)="onSaveButton()" class="toolbar-button">
        <ion-icon color="primary" name="save"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>PLANILLA DE EVALUACIÓN DE RECEPTORAS</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding class="app">
  <app-network-notify-banner id="networkNotifyBanner"></app-network-notify-banner>
  <ion-list>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col (click)="setControlPanel(1)">
            <div
              [ngClass]="{'button-panel-enabled': mbControlPanel === 1, 'button-panel-disabled': mbControlPanel !== 1 }">
              <ion-label>1.Orden</ion-label>
            </div>
            <ion-badge class="badge-error" *ngIf="!validation_form_order.valid" color="danger">!</ion-badge>
          </ion-col>
          <ion-col (click)="setControlPanel(2)">
            <div
              [ngClass]="{'button-panel-enabled': mbControlPanel === 2, 'button-panel-disabled': mbControlPanel !== 2 }">
              <ion-label>2. Planilla</ion-label>
            </div>
          </ion-col>
          <ion-col (click)="setControlPanel(3)">
            <div
              [ngClass]="{'button-panel-enabled': mbControlPanel === 3, 'button-panel-disabled': mbControlPanel !== 3 }">
              <ion-label>3. General</ion-label>
            </div>
            <!--ion-badge class="badge-error" *ngIf="!validation_form_general.valid" color="danger">!</ion-badge-->
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
	
	<ion-item *ngIf="mbControlPanel===1" class="card-page-order">
      <form [formGroup]="validation_form_order">
        <ion-card>
          <ion-card-header class="ibox-title">
            <h5>Orden de Producción</h5>
          </ion-card-header>
          <ion-card-content>
            <ion-grid style="padding: 18px;">
              <ion-row>
                <ion-col size="4">
                  <ion-label>Orden de producción</ion-label>
                </ion-col>
                <ion-col size="7.6">
                  <ion-label>Cliente</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="4" class="text-readonly">
                  <ion-label>{{order.id}}</ion-label>
                </ion-col>
                <ion-col size="7.6" class="text-readonly">
                  <ion-label>{{order.client.bussiness_name}}</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="4.3">
                  <ion-label>Local</ion-label>
                </ion-col>
                <ion-col size="3.5">
                  <ion-label>Ciudad</ion-label>
                </ion-col>
                <ion-col size="3.5">
                  <ion-label>Fecha</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="4.3" class="text-readonly">
                  <ion-label>{{agenda.name_local}}</ion-label>
                </ion-col>
                <ion-col size="3.5" class="text-readonly">
                  <ion-label>{{evaluation.city}}</ion-label>
                </ion-col>
                <ion-col size="3.5" class="text-readonly">
                  <ion-label>{{evaluation.date}}</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col>
                  <ion-label>Id. Animal</ion-label>
                </ion-col>
                <ion-col>
                  <ion-label>Chapeta</ion-label>
                </ion-col>
              </ion-row>
			  <ion-row>
                <ion-col>
                  <ion-input type="text" formControlName="animal_id" [(ngModel)]="evaluation.animal_id"></ion-input>
                  <ng-container *ngFor="let validation of validation_messages.animal_id">
                    <div class="error-message"
                      *ngIf="validation_form_order.get('animal_id').hasError(validation.type) 
                      && (validation_form_order.get('animal_id').dirty || validation_form_order.get('animal_id').touched)">
                      {{ validation.message }}
                    </div>
                  </ng-container>
                </ion-col>
                <ion-col>
                  <ion-input type="text" formControlName="chapeta" [(ngModel)]="evaluation.chapeta"></ion-input>
                  <div>
                    <ng-container *ngFor="let validation of validation_messages.chapeta">
                      <div class="error-message"
                        *ngIf="validation_form_order.get('chapeta').hasError(validation.type) 
                        && (validation_form_order.get('chapeta').dirty || validation_form_order.get('chapeta').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>
      </form>
    </ion-item>
    
  </ion-list>
</ion-content>