<ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button class="toolbar-button"></ion-back-button>
      </ion-buttons>
      <ion-title>PLANILLA DE ASPIRACION FOLICULAR</ion-title>
  
      <ion-buttons slot="end">
        <ion-button class="toolbar-button" (click)="saveItem()" [disabled]="!validation_form.valid">
          <ion-icon color="primary" name="save"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content>
      <ion-list>
        <ion-item>
          <form class="panel-center" [formGroup]="validation_form">
            <ion-grid>
              <ion-row>
                <ion-col>
                  <ion-item *ngIf="!newRegistry" style="margin: 0 auto">Registro {{indx + 1 }} de {{detailsList?.length }}
                  </ion-item>
                  <ion-item *ngIf="newRegistry" style="margin: 0 auto">Nuevo Registro
                  </ion-item>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-6>
                  <ion-label>Clasificación del Embrión</ion-label>
                </ion-col>
                <ion-col col-6>
                  <ion-label>Receptora sincronizada</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-6>
                  <ion-input class="text-readonly" type="text" readonly formControlName="donor_breed" [(ngModel)]="dataItem.embryo_class"></ion-input>
                  <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages.donor">
                      <div class="error-message" *ngIf="validation_form.get('donor_breed').hasError(validation.type) 
                          && (validation_form.get('donor_breed').dirty || validation_form.get('donor_breed').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>
                </ion-col>
                <ion-col col-6>
                  <ion-checkbox checked="true" formControlName="donor_breed" (ngModelChange)="checkValue($event)"></ion-checkbox>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-6>
                  <ion-label>Nombre de Receptora</ion-label>
                </ion-col>
                <ion-col col-6>
                  <ion-label>Cuerpo Luteo</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-6 *ngIf="checkRecept">
                  <ion-select style="max-width: 100%;" formControlName="recept" placeholder="Nombre" [(ngModel)]="dataItem.recept">
                    <ion-select-option value="Leche">Leche</ion-select-option>
                    <ion-select-option value="Carne">Carne</ion-select-option>
                  </ion-select>
                </ion-col>
                <ion-col col-6 *ngIf="!checkRecept">
                  <ion-input type="text" formControlName="recept" [(ngModel)]="dataItem.recept"></ion-input>
                </ion-col>
                <ion-col col-6>
                  <ion-input type="text" formControlName="corpus_luteum" [(ngModel)]="dataItem.corpus_luteum"></ion-input>
                  <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages.corpus_luteum">
                      <div class="error-message" *ngIf="validation_form.get('corpus_luteum').hasError(validation.corpus_luteum) 
                        && (validation_form.get('corpus_luteum').dirty || validation_form.get('corpus_luteum').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-6>
                  <ion-label>Local</ion-label>
                </ion-col>
                <ion-col col-6>
                  <ion-label>Transferidor</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-6>
                  <ion-select style="max-width: 100%;" formControlName="bull" placeholder="Nombre" [(ngModel)]="dataItem.bull">
                    <ion-select-option value="Leche">Leche</ion-select-option>
                    <ion-select-option value="Carne">Carne</ion-select-option>
                  </ion-select>
                </ion-col>
                <ion-col col-6>
                  <ion-input formControlName="bull_breed" [(ngModel)]="dataItem.bull_breed"></ion-input>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-12>
                  <ion-label>Observaciones</ion-label>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-12>
                  <ion-input type="text" style="height: 120px" formControlName="gi" [(ngModel)]="dataItem.gi"></ion-input>
                  <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages.gi">
                      <div class="error-message" *ngIf="validation_form.get('gi').hasError(validation.type) 
                        && (validation_form.get('gi').dirty || validation_form.get('gi').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </form>
        </ion-item>
        <ion-item>
          <ion-grid style="text-align: center;">
            <ion-row>
              <ion-col>
                <ion-button fill="outline" class="fab-button" [disabled]="indx===0 || (action === 'update' && !validation_form.valid) " (click)="backItemButton()">
                  <ion-icon name="arrow-dropleft-circle"></ion-icon>
                </ion-button>
              </ion-col>
              <ion-col>
              </ion-col>
              <ion-col>
                <ion-button fill="outline" class="fab-button" [disabled]="!validation_form.valid" (click)="nextItemButton()">
                  <ion-icon name="arrow-dropright-circle"></ion-icon>
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      </ion-list>
    </ion-content>
